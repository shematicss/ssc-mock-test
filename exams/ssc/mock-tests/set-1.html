<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SheMatics • Full Mock Test — 60 Q • 30 min</title>
<style>
  :root{
    --red:#E53935; --blue:#1E64C8; --bg:#f7fafc; --card:#fff; --muted:#6b7280; --ink:#081226;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);line-height:1.5}
  header{background:linear-gradient(135deg,var(--red),var(--blue));color:#fff;padding:16px}
  .container{max-width:1000px;margin:16px auto;padding:0 16px}
  .top{display:flex;align-items:center;gap:12px}
  .logo{width:44px;height:44px;object-fit:contain;border-radius:8px;background:#fff;padding:6px}
  h1{margin:0;font-size:20px}
  .meta{color:rgba(255,255,255,0.9);font-size:13px}
  .panel{display:grid;grid-template-columns: 1fr 320px; gap:18px;margin-top:18px}
  .card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 8px 24px rgba(2,6,23,.06)}
  .qmeta{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  .question{font-weight:700;margin:6px 0 12px}
  .options{display:flex;flex-direction:column;gap:8px}
  .opt{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;border:1px solid #e6eaf0;cursor:pointer}
  .opt input{width:18px;height:18px}
  .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  button{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
  .btn-ghost{background:#fff;border:1px solid #e6eaf0}
  .btn-primary{background:linear-gradient(135deg,var(--red),var(--blue));color:#fff}
  .info{font-size:13px;color:var(--muted);margin-top:8px}
  .timer{font-weight:800;color:var(--red)}
  .sidebar .section-list{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
  .qnum{padding:8px;border-radius:8px;text-align:center;border:1px solid #eceff6;cursor:pointer}
  .qnum.answered{background:linear-gradient(135deg,#eef2ff,#ecfdf5);border-color:transparent}
  .qnum.current{box-shadow:0 6px 18px rgba(0,0,0,.08);border-color:var(--blue)}
  .result{display:none}
  .review li{margin-bottom:8px}
  .summary{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .chip{padding:6px 8px;border-radius:999px;background:#f1f5f9;border:1px solid #e6eaf0;font-weight:700}
  @media(max-width:980px){ .panel{grid-template-columns:1fr} .sidebar{order:-1} .sidebar .section-list{grid-template-columns:repeat(6,1fr)}}
</style>
</head>
<body>
<header>
  <div class="container">
    <div class="top">
      <img class="logo" src="/assets/img/logo.png" alt="SheMatics">
      <div>
        <h1>SheMatics — Full Mock Test</h1>
        <div class="meta">60 Questions • 30 minutes • Sections: Maths, Reasoning, English, GK/GS</div>
      </div>
      <div style="margin-left:auto; text-align:right">
        <div class="meta">Total Time</div>
        <div class="timer" id="timer">30:00</div>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <div class="panel">
    <!-- main card -->
    <div class="card">
      <div class="qmeta">
        <div>Section: <strong id="sectionName">Maths</strong></div>
        <div>Q <span id="current">1</span> / <span id="total">60</span></div>
      </div>

      <div id="questionArea">
        <div id="qText" class="question">Question text...</div>
        <div class="options" id="options"></div>

        <div class="actions">
          <button class="btn-ghost" id="prevBtn">Previous</button>
          <button class="btn-ghost" id="nextBtn">Next</button>
          <button class="btn-primary" id="submitBtn">Submit Test</button>
          <button class="btn-ghost" id="clearBtn">Clear Answer</button>
        </div>
        <div class="info" id="explain" style="display:none"></div>
      </div>

      <div id="resultArea" class="result card" style="margin-top:12px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-weight:800">Your Score: <span id="scoreVal"></span> / <span id="totalQ"></span></div>
          <div id="msg" style="font-weight:700"></div>
        </div>
        <div class="summary" id="sectionSummary"></div>

        <details style="margin-top:10px">
          <summary>Review answers</summary>
          <ol id="reviewList" class="review"></ol>
        </details>

        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn-ghost" id="goHome">Go to Home</button>
          <button class="btn-primary" id="retakeBtn">Retake Test</button>
        </div>
      </div>
    </div>

    <!-- sidebar -->
    <aside class="card sidebar">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div style="font-weight:800">Question Palette</div>
        <div class="muted">Click to jump</div>
      </div>

      <div class="section-list" id="palette"></div>

      <div class="info" style="margin-top:12px">Answered: <span id="ansCount">0</span> • Remaining: <span id="remCount">60</span></div>
      <div style="margin-top:12px" class="info">
        <div>Tips:</div>
        <ul style="margin:6px 0 0 18px;color:var(--muted);font-size:13px">
          <li>Attempt all; don’t spend too long on one Q.</li>
          <li>Use review to check marked answers at the end.</li>
        </ul>
      </div>
    </aside>
  </div>
</main>

<script>
// ======= QUESTIONS (60) =======
const questions = [
/* 15 Maths */
{section:'Maths', q:"2 + 7 = ?", o:["8","9","10","11"], a:1, e:"2 + 7 = 9"},
{section:'Maths', q:"If 20% of a number is 40, the number is:", o:["80","120","200","160"], a:3, e:"20% of x = 40 → 0.2x=40 → x=40/0.2=200 (option 3)"},
{section:'Maths', q:"LCM of 6 and 8 is:", o:["12","24","18","48"], a:1, e:"Multiples common: 24 is LCM"},
{section:'Maths', q:"HCF of 14 and 21 is:", o:["3","7","14","21"], a:1, e:"Common factors: 7"},
{section:'Maths', q:"Area of rectangle with length 8 and breadth 5:", o:["40","13","30","80"], a:0, e:"Area = 8×5 = 40"},
{section:'Maths', q:"If speed = 60 km in 2 hours, speed is:", o:["20 km/h","30 km/h","15 km/h","40 km/h"], a:1, e:"60/2 = 30 km/h"},
{section:'Maths', q:"Simple interest on ₹1000 at 5% for 2 years:", o:["₹50","₹100","₹150","₹200"], a:3, e:"SI = P×R×T/100 = 1000×5×2/100 = ₹100; Wait compute carefully: 1000×5=5000; ×2=10000; /100 = 100 → option 1? — Correction: actually 100. So fix: option values adjusted below."},
// Fix the above to correct options (we need integer correctness). Replace object:
{section:'Maths', q:"Simple interest on ₹1000 at 5% for 2 years:", o:["₹50","₹100","₹150","₹200"], a:1, e:"SI = 1000×5×2/100 = ₹100"},
{section:'Maths', q:"(5 × 6) + 12 = ?", o:["42","32","40","48"], a:0, e:"5×6=30; +12 = 42"},
{section:'Maths', q:"If x = 3, evaluate 2x^2 + 1:", o:["19","13","15","18"], a:2, e:"2×9 + 1 = 18+1=19 → option 0 (adjust)"},
// Fix: compute accurately. Let's replace with simpler correct Qs to avoid confusion.
{section:'Maths', q:"If x = 3, evaluate 2x + 5:", o:["11","8","10","7"], a:0, e:"2×3 + 5 = 6 + 5 = 11"},
{section:'Maths', q:"Average of 4, 6 and 8 is:", o:["6","7","5","8"], a:0, e:"(4+6+8)/3 = 18/3 = 6"},
{section:'Maths', q:"2^5 equals:", o:["32","16","64","8"], a:0, e:"2^5 = 32"},
{section:'Maths', q:"What is 15% of 200?", o:["20","25","30","35"], a:2, e:"15% of 200 = 0.15×200 = 30"},
{section:'Maths', q:"If ratio 2:3 and total is 50, larger part is:", o:["20","30","25","35"], a:1, e:"Parts 2+3=5; larger = 3/5×50 = 30"},

/* 15 Reasoning */
{section:'Reasoning', q:"Complete the series: 2, 4, 8, 16, ?", o:["18","24","32","36"], a:2, e:"Each term ×2 → next is 32"},
{section:'Reasoning', q:"Find the odd one out: Dog, Cat, Cow, Car", o:["Dog","Cat","Cow","Car"], a:3, e:"Car is not an animal"},
{section:'Reasoning', q:"If 'A' means '+', 'B' means '-', then 5 A 3 B 2 = ?", o:["6","0","--","--"], a:0, e:"5 + 3 - 2 = 6"},
{section:'Reasoning', q:"Direction: You face North, turn right, then right, then left. You face:", o:["South","East","West","North"], a:2, e:"North -> right (East) -> right (South) -> left (East). Wait compute: start North -> right = East; right = South; left = East → final East (option 1). Adjust option indices accordingly."},
// Replace with clearer one:
{section:'Reasoning', q:"You face North. Turn right, then left. Which direction now?", o:["North","East","South","West"], a:1, e:"North -> right = East; then left = North. Hmm mismatch. Let's pick simpler: North -> right = East; then left = North. So final North. Let's instead create a simple reasoning Q."},
// To avoid confusion, replace previous two with simpler correct ones:
{section:'Reasoning', q:"If all Bloops are Razzies and all Razzies are Lazzies, then all Bloops are:", o:["Lazzies","Not Lazzies","Cannot say","Both"], a:0, e:"Transitive: Bloops -> Razzies -> Lazzies"},
{section:'Reasoning', q:"Find next: 3, 6, 11, 18, ?", o:["25","27","26","24"], a:0, e:"Pattern: +3, +5, +7, next +9 → 18+9=27. Wait calculation: 3→6(+3),6→11(+5),11→18(+7),18→?(+9)=27 → option 1. Fix a index to 1."},
// Rebuild reasoning set cleanly to ensure correctness — it's getting messy. For clarity and to avoid errors, I'll supply a well-checked set below replacing the reasoning and earlier mixed ones.
];

// ***** NOTE *****
// Above array editing got messy while composing — to ensure a correct, fully working test,
// I will replace the entire questions array below with a clean, validated 60-question list.
// (This is the actual array used by the quiz engine.)
const data = [
/* ========== MATHS 15 ========== */
{section:"Maths",q:"2 + 7 = ?",o:["8","9","10","11"],a:1,e:"2 + 7 = 9."},
{section:"Maths",q:"If 20% of a number is 40, the number is:",o:["80","120","200","160"],a:2,e:"0.2×x = 40 → x = 40/0.2 = 200."},
{section:"Maths",q:"LCM of 6 and 8 is:",o:["12","24","18","48"],a:1,e:"LCM(6,8)=24."},
{section:"Maths",q:"HCF of 14 and 21 is:",o:["3","7","14","21"],a:1,e:"Common factor = 7."},
{section:"Maths",q:"Area of rectangle (8 by 5) is:",o:["40","13","30","80"],a:0,e:"Area = 8×5 = 40."},
{section:"Maths",q:"Speed if 60 km is covered in 2 hours:",o:["20 km/h","30 km/h","15 km/h","40 km/h"],a:1,e:"Speed = distance/time = 60/2 = 30 km/h."},
{section:"Maths",q:"Simple interest on ₹1000 at 5% for 2 years is:",o:["₹50","₹100","₹150","₹200"],a:1,e:"SI = 1000×5×2/100 = ₹100."},
{section:"Maths",q:"(5 × 6) + 12 = ?",o:["42","32","40","48"],a:0,e:"5×6=30; +12=42."},
{section:"Maths",q:"If x = 3, evaluate 2x + 5:",o:["11","8","10","7"],a:0,e:"2×3+5=11."},
{section:"Maths",q:"Average of 4, 6 and 8 is:",o:["6","7","5","8"],a:0,e:"(4+6+8)/3 = 18/3 = 6."},
{section:"Maths",q:"2^5 equals:",o:["32","16","64","8"],a:0,e:"2^5 = 32."},
{section:"Maths",q:"What is 15% of 200?",o:["20","25","30","35"],a:2,e:"0.15×200 = 30."},
{section:"Maths",q:"If ratio is 2:3 and total is 50, larger part is:",o:["20","30","25","35"],a:1,e:"Total parts=5; larger = 3/5×50 = 30."},
{section:"Maths",q:"Perimeter of square with side 7 is:",o:["28","14","49","21"],a:0,e:"Perimeter = 4×7 = 28."},
{section:"Maths",q:"Value of √81 is:",o:["7","8","9","10"],a:2,e:"√81 = 9."},

/* ========== REASONING 15 ========== */
{section:"Reasoning",q:"Complete series: 2, 4, 8, 16, ?",o:["18","24","32","36"],a:2,e:"Each term ×2 → next = 32."},
{section:"Reasoning",q:"Find odd one: Dog, Cat, Cow, Car",o:["Dog","Cat","Cow","Car"],a:3,e:"Car is not an animal."},
{section:"Reasoning",q:"If all Bloops are Razzies and all Razzies are Lazzies, then Bloops are:",o:["Razzies only","Lazzies","Neither","Both"],a:1,e:"Transitive relation → Bloops are Lazzies."},
{section:"Reasoning",q:"Next: 3, 6, 11, 18, ?",o:["25","27","26","24"],a:1,e:"Differences: +3,+5,+7,next +9 →18+9=27."},
{section:"Reasoning",q:"Which completes analogy: Hand is to Glove as Foot is to ?",o:["Sock","Shoe","Ring","Hat"],a:1,e:"Glove covers hand; Shoe covers foot."},
{section:"Reasoning",q:"Direction: Start North, turn right -> face:",o:["East","West","South","North"],a:0,e:"North -> right = East."},
{section:"Reasoning",q:"If A>B and B>C then A compared to C is:",o:["< C","= C","> C","Cannot say"],a:2,e:"Transitive inequality → A > C."},
{section:"Reasoning",q:"Complete pattern: A, C, F, J, ?",o:["O","P","N","M"],a:0,e:"Positions: +2,+3,+4,+5 → J (10) +5 = 15 → O."},
{section:"Reasoning",q:"Find odd number: 16, 18, 21, 24, 26",o:["16","18","21","24"],a:2,e:"21 is odd (others even)."},
{section:"Reasoning",q:"If 7 is coded as 'SEVEN', then code for 4 is:",o:["FOUR","IV","FOUR","FOUR"],a:0,e:"Plain word 'FOUR'."},
{section:"Reasoning",q:"Which is mirror image of 'bd' (simple letter pair)?",o:["db","bd","pq","qp"],a:0,e:"Mirror swaps order and flips b↔d."},
{section:"Reasoning",q:"Syllogism: All cats are animals. Some animals are pets. Conclusion: Some cats are pets — True/False?",o:["True","False","Cannot say","Both"],a:2,e:"Not necessarily some cats are pets → Cannot say."},
{section:"Reasoning",q:"If every X is Y and some Y are Z, then some X are Z — True/False?",o:["True","False","Cannot say","Sometimes"],a:2,e:"Cannot be certain; some Y that are Z may not include any X."},
{section:"Reasoning",q:"Find next in numbers: 5, 10, 20, 40, ?",o:["60","80","70","100"],a:1,e:"×2 each time → 40×2=80."},
{section:"Reasoning",q:"Which word does NOT belong: Apple, Orange, Carrot, Banana",o:["Apple","Orange","Carrot","Banana"],a:2,e:"Carrot is a vegetable; others are fruits."},

/* ========== ENGLISH 15 ========== */
{section:"English",q:"Choose synonym of 'Happy':",o:["Sad","Joyful","Angry","Tired"],a:1,e:"Joyful = Happy."},
{section:"English",q:"Fill: She ___ to school every day.",o:["go","goes","gone","going"],a:1,e:"Third person singular present: goes."},
{section:"English",q:"Opposite of 'Scarce' is:",o:["Rare","Plentiful","Little","Tiny"],a:1,e:"Plentiful = opposite of scarce."},
{section:"English",q:"Choose correct sentence:",o:["He don't like tea.","He doesn't like tea.","He does not likes tea.","He don't likes tea."],a:1,e:"Correct: He doesn't like tea."},
{section:"English",q:"Fill: She is the ___ girl in the class.",o:["tall","taller","tallest","most tall"],a:2,e:"Superlative = tallest."},
{section:"English",q:"Pick synonym of 'Begin':",o:["Start","End","Finish","Close"],a:0,e:"Begin = Start."},
{section:"English",q:"Choose correct spelling:",o:["Accomodate","Acommodate","Accommodate","Acomodate"],a:2,e:"Correct spelling: Accommodate."},
{section:"English",q:"Fill: He has ___ apples than me.",o:["less","fewer","fewest","least"],a:1,e:"Countable → fewer."},
{section:"English",q:"Choose antonym of 'Honest':",o:["Truthful","Sincere","Dishonest","Frank"],a:2,e:"Dishonest = opposite of honest."},
{section:"English",q:"Pick the correct preposition: She is good ___ math.",o:["in","at","on","for"],a:1,e:"Good at math."},
{section:"English",q:"Identify part of speech: 'Quickly' is a/an ___",o:["Noun","Verb","Adverb","Adjective"],a:2,e:"Quickly modifies verb → adverb."},
{section:"English",q:"Choose correct form: I ___ seen that movie.",o:["have","has","had","having"],a:0,e:"I have seen."},
{section:"English",q:"Fill: They ___ playing since morning.",o:["is","are","have been","has been"],a:2,e:"They have been playing."},
{section:"English",q:"Synonym of 'Difficult':",o:["Easy","Hard","Simple","Light"],a:1,e:"Hard = Difficult."},
{section:"English",q:"Choose correct article: ___ apple a day keeps doctor away.",o:["A","An","The","No article"],a:1,e:"Apple begins with vowel sound → 'An'."},

/* ========== GK/GS 15 ========== */
{section:"GK/GS",q:"Capital of India is:",o:["Mumbai","New Delhi","Kolkata","Chennai"],a:1,e:"New Delhi is capital of India."},
{section:"GK/GS",q:"Who wrote 'Wings of Fire'?",o:["A.P.J. Abdul Kalam","R.K. Narayan","Chetan Bhagat","Arundhati Roy"],a:0,e:"Autobiography by A.P.J. Abdul Kalam."},
{section:"GK/GS",q:"Which planet is known as the Red Planet?",o:["Venus","Mars","Jupiter","Saturn"],a:1,e:"Mars is the Red Planet."},
{section:"GK/GS",q:"The currency of USA is:",o:["Dollar","Euro","Rupee","Yen"],a:0,e:"US Dollar."},
{section:"GK/GS",q:"Who is the current Prime Minister of India? (as of 2024)",o:["Narendra Modi","Amit Shah","Rahul Gandhi","Unknown"],a:0,e:"Narendra Modi is the PM (verify if changed)."},
{section:"GK/GS",q:"Which gas is essential for human respiration?",o:["Nitrogen","Oxygen","Carbon dioxide","Hydrogen"],a:1,e:"Oxygen is essential."},
{section:"GK/GS",q:"National animal of India is:",o:["Tiger","Lion","Elephant","Peacock"],a:0,e:"Bengal Tiger."},
{section:"GK/GS",q:"Which ocean is the largest?",o:["Atlantic","Indian","Pacific","Arctic"],a:2,e:"Pacific Ocean is largest."},
{section:"GK/GS",q:"Who discovered gravity (apple anecdote)?",o:["Newton","Einstein","Galileo","Tesla"],a:0,e:"Sir Isaac Newton."},
{section:"GK/GS",q:"UN stands for:",o:["United Nations","Universal Network","United Nationship","Union of Nations"],a:0,e:"United Nations."},
{section:"GK/GS",q:"Which year did India gain independence?",o:["1945","1947","1950","1952"],a:1,e:"India gained independence in 1947."},
{section:"GK/GS",q:"Largest continent by area is:",o:["Africa","Asia","Europe","Antarctica"],a:1,e:"Asia is largest."},
{section:"GK/GS",q:"What is H2O commonly known as?",o:["Salt","Water","Hydrogen","Oxygen"],a:1,e:"H2O = Water."},
{section:"GK/GS",q:"Chemical symbol for Gold is:",o:["Gd","Au","Ag","Go"],a:1,e:"Gold = Au."},
{section:"GK/GS",q:"Earth completes one rotation in about:",o:["24 hours","12 hours","7 days","30 days"],a:0,e:"Approximately 24 hours."}
];

// ====== Quiz engine ======
let idx = 0;
const total = data.length;
const marked = new Array(total).fill(null);
const startTime = Date.now();
let remaining = 1800; // seconds (30 min)
let timerInterval = null;

const qText = document.getElementById('qText');
const optionsEl = document.getElementById('options');
const currentEl = document.getElementById('current');
const totalEl = document.getElementById('total');
const sectionName = document.getElementById('sectionName');
const palette = document.getElementById('palette');
const ansCount = document.getElementById('ansCount');
const remCount = document.getElementById('remCount');
const explain = document.getElementById('explain');

totalEl.textContent = total;
document.getElementById('totalQ').textContent = total;

function formatTime(s){
  const mm = String(Math.floor(s/60)).padStart(2,'0');
  const ss = String(s%60).padStart(2,'0');
  return `${mm}:${ss}`;
}
document.getElementById('timer').textContent = formatTime(remaining);

function startTimer(){
  if(timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    remaining--;
    document.getElementById('timer').textContent = formatTime(remaining);
    if(remaining<=0){
      clearInterval(timerInterval);
      autoSubmit();
    }
  },1000);
}

function renderQuestion(i){
  idx = i;
  const item = data[idx];
  currentEl.textContent = idx+1;
  sectionName.textContent = item.section;
  qText.textContent = item.q;
  optionsEl.innerHTML = '';
  for(let j=0;j<item.o.length;j++){
    const label = document.createElement('label');
    label.className = 'opt';
    label.dataset.i = j;
    label.innerHTML = `<input type="radio" name="opt" value="${j}"> <span>${item.o[j]}</span>`;
    label.onclick = ()=>{ markAnswer(j); };
    // mark checked if already selected
    if(marked[idx]===j){
      label.querySelector('input').checked = true;
    }
    optionsEl.appendChild(label);
  }
  explain.style.display = 'none';
  updatePalette();
}

function markAnswer(choice){
  marked[idx] = choice;
  updatePalette();
  updateCounts();
}

function updatePalette(){
  palette.innerHTML = '';
  for(let i=0;i<total;i++){
    const d = document.createElement('div');
    d.className = 'qnum' + (marked[i]!==null ? ' answered' : '') + (i===idx ? ' current' : '');
    d.textContent = i+1;
    d.onclick = ()=>{ renderQuestion(i); };
    palette.appendChild(d);
  }
}

function updateCounts(){
  const answered = marked.filter(v=>v!==null).length;
  ansCount.textContent = answered;
  remCount.textContent = total - answered;
}

document.getElementById('nextBtn').onclick = ()=>{ if(idx < total-1) renderQuestion(idx+1); };
document.getElementById('prevBtn').onclick = ()=>{ if(idx > 0) renderQuestion(idx-1); };
document.getElementById('clearBtn').onclick = ()=>{ marked[idx]=null; renderQuestion(idx); updateCounts(); };

document.getElementById('submitBtn').onclick = ()=>{ if(confirm("Submit test now?")) submitTest(); };

function submitTest(){
  clearInterval(timerInterval);
  // calculate score
  let score=0;
  const reviewList = document.getElementById('reviewList');
  reviewList.innerHTML = '';
  const sectionStats = {};
  data.forEach((it,i)=>{
    if(!sectionStats[it.section]) sectionStats[it.section] = {tot:0,correct:0};
    sectionStats[it.section].tot++;
    const li = document.createElement('li');
    const your = marked[i]===null ? '—' : String.fromCharCode(65+marked[i]);
    const correct = String.fromCharCode(65+it.a);
    if(marked[i]===it.a){ score++; sectionStats[it.section].correct++; }
    li.innerHTML = `<div><strong>Q${i+1} (${it.section}):</strong> ${it.q}</div>
      <div style="color:var(--muted)">Your: <b>${your}</b> • Correct: <b>${correct}</b></div>
      <div style="color:var(--muted);margin-top:4px">Explain: ${it.e}</div>`;
    reviewList.appendChild(li);
  });
  // show results
  document.getElementById('scoreVal').textContent = score;
  document.getElementById('totalQ').textContent = total;
  const msg = document.getElementById('msg');
  if(score >= 48) msg.textContent = "Excellent!";
  else if(score >= 36) msg.textContent = "Good job!";
  else if(score >= 24) msg.textContent = "Fair, practice more.";
  else msg.textContent = "Keep practicing!";
  // section summary
  const ss = document.getElementById('sectionSummary');
  ss.innerHTML = '';
  for(const s in sectionStats){
    const c = sectionStats[s];
    const el = document.createElement('div');
    el.className = 'chip';
    el.textContent = `${s}: ${c.correct}/${c.tot}`;
    ss.appendChild(el);
  }

  // hide question area, show result area
  document.getElementById('questionArea').style.display = 'none';
  const res = document.getElementById('resultArea');
  res.style.display = 'block';
  window.scrollTo(0,0);
}

function autoSubmit(){
  alert("Time is up — submitting your test.");
  submitTest();
}

document.getElementById('retakeBtn').onclick = ()=>{
  // reset
  for(let i=0;i<total;i++) marked[i]=null;
  remaining = 1800;
  document.getElementById('questionArea').style.display = 'block';
  document.getElementById('resultArea').style.display = 'none';
  renderQuestion(0);
  updateCounts();
  startTimer();
};

document.getElementById('goHome').onclick = ()=>{ window.location.href = "/index.html"; };

// init
renderQuestion(0);
updateCounts();
startTimer();
</script>
</body>
</html>
